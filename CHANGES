○変更履歴

Release 0.8.0
・シミュレータ（schesim.rb）
  - 機能追加
    + アプリケーションフック機能を追加．
  - その他
    + 実装の簡単化及び動作高速化のために，タスク関数の実装をThreadから
      Fiberに変更．それに伴い，Ruby 1.9.x 以降の環境でのみ動作する．す
      なわち，Ruby 1.8.x 以前はサポート外とする．
    + Rakefile の軽微な修正．
    + バージョン番号を0.8.0に更新．

Release 0.7.3
・シミュレータ（schesim.rb）
  - 機能追加
    + タスク処理記述から呼び出せるAPIに，mig_tsk を追加．
  - バグ修正
    + マルチコアアーキテクチャにおいて，タスクが待ち状態に遷移すると同
      時刻に，別コアから起動要求が発生した場合に，エラーで停止してしま
      うバグを修正．
  - その他
    + タスクが待ち状態に遷移するAPIにおいて，task_api.rbで待ち状態に遷
      移させるのではなく，タスクスレッドの動作が中断した後に変更するよ
      う修正（他のAPIと統一）．
    + Rakefileの不要なコードを削除．
    + バージョン番号を0.7.3に更新．

Release 0.7.2
・シミュレータ（schesim.rb）
  - 機能追加
    + タスク処理記述から呼び出せるAPIに，rot_rdq，wup_tsk，slp_tsk を追
      加
    + 研究用として２つの階層型スケジューリングをlabs/以下に追加
      + bss.rb, tpa.rb
  - 動作変更
    + 出力するTLV可視化用リソースファイルのタスク出力順序を，プロセッサ
      ID番号，所属アプリケーションID番号，優先度，ID番号でソートするよ
      う修正
  - バグ修正
    + アプリケーション情報ファイルにおいて，デッドラインを持たないタス
      クのデッドラインにnullを指定した（もしくは，パラメータ指定を記述
      しない）場合，パラメータの妥当性チェックでエラーが発生してしまう
      バグを修正
    + タスクの起動要求がキューイングされたタイミングで，そのタスクの絶
      対デッドラインを更新した結果，デッドラインミスの検出を逃してしま
      うバグを修正
    + 残りバジェットの表示において，0未満の値が切り落とされてしまうバグ
      を修正
    + タスクの実行終了と同時刻にそのタスクの起動要求が発生する場合に，
      起動要求を受け付ける前にタスクの終了処理を実行すべきであるが，タ
      スクの起動要求がキューイングされてしまうバグを修正
  - その他
    + タスク処理記述から呼び出せるAPIの定義をtask.rbからtask_api.rbに分
      離
    + C0カバレッジ情報を取得するコマンドをRakefileに追加
    + バージョン番号を0.7.2に更新
・タスク生成（appgen.rb）
  - 動作変更
    + シミュレータの最新版に対応
      + タスクのオフセットパラメータを生成
      + フック関数の定義を削除
      + タスク実行時間を，所属するアプリケーションのシェアに比例するよう変更

Release 0.7.1
・シミュレータ（schesim.rb）
  - 動作変更
    + タスク実行後の残り実行時間の計算において，実行されたタスクが所属
      するアプリケーションのプロセッサ利用率と，実行された時間の積を残
      り実行時間から減算していたが，実行された時間をそのまま残り実行時
      間から減算するよう変更した．プロセッサ利用率を１に指定している場
      合には，前バージョンと動作は変わらない
  - バグ修正
    + （シナリオファイルなどで）同一のシステム時刻に，同一の優先度のタ
      スクを複数起動した場合に，タスクの優先順位が起動順序と一致しない
      ことがあるバグを修正
    + タスク終了時に，起動要求がキューイングされているために再度実行可
      能状態に遷移する場合に，タスク優先度が起動時優先度に戻されないバ
      グを修正
    + デッドラインをミスしたタスクが待ち状態に遷移する際に，すでにデッ
      ドライン監視の対象から外れているにも関わらず，再度デッドライン監
      視の対象から外そうと試みるバグを修正
  - その他
    + 設定ファイル（schesim.conf）に統計情報取得用ログ（begin_measure，
      end_measure）の出力有無を指定する項目を追加
    + サンプルプログラムを実行した結果（objディレクトリ）をパッケージか
      ら削除
・その他
  - バージョン番号の更新プログラム（utils/version.rb）の追加
  - バージョン番号を0.7.1に更新

Release 0.7.0
・シミュレータ（schesim.rb）
  - 機能追加
    + 統計情報を取得する区間を指定する機能を追加．
  - バグ修正
    + アプリケーションのバジェットが０になった時刻に，アプリケーション
      にバジェットが補充され，かつ高優先度タスクが実行可能になった場合
      に，タスク切り替えログ dispatch_from が出力されないバグを修正．
    + グローバルスケジューリングにFPSを指定し，アプリケーションに対して
	  異なる優先度を指定した場合に，シミュレーションがループしてしまう
	  バグを修正
  - その他
    + ソースコードの整理
・統計情報取得ツール（stat.rb）
  - 機能追加
    + 統計情報を取得する区間を示すログに対応
・その他
  - LICENSEファイルの追加
  - ユーザズマニュアル，チュートリアルの更新
  - バージョン番号の更新

Release 0.6.0
・シミュレータ（schesim.rb）
  - 機能追加
    + API呼び出しのログで，操作対象オブジェクト名も出力するよう変更．
  - クラス名の変更
    + ACB→APPLICATION
    + TCB→TASK
・全体
  - その他
    + ライセンスをApache License version 2.0に決定．
    + ライセンス文を記述したLICENSEファイルを追加．
    + ソースファイルに，ライセンス文を追加．
    + 文字コードをUTF8に統一．

Release 0.5.7
・シミュレータ（schesim.rb）
  - 機能追加
    + シミュレーションの開始と終了時にログを出力する機能を追加．
  - ファイル名の変更
    + acb.rb → application.rb
    + tcb.rb → task.rb
    + task_func.rb → hook.rb
  - バグ修正
    + アプリケーションのシェアを浮動小数点数値で指定したときに，シミュ
      レーションがループしてしまうバグを修正．
    + TLV用のファイルが古いファイルになっていたものを最新ファイルに更新した
	+ タスク本体の実行が完了した直後に，PostTaskHookを実行する前でタス
	  ク切り替えが発生してしまうバグを修正．
	+ 初期時刻＋指定したシミュレーション時間の時刻を越えてシミュレーショ
	  ンしてしまうバグを修正．
	+ 周期が0のタスクが含まれると，アプリケーションに含まれるタスクの
	  LCMも0になってしまうバグを修正．
	+ デッドラインミスを正しく検出できない場合があるバグを修正．
	+ アプリケーションが満了状態に遷移する際のPostTaskHook，満了状態か
	  ら実行可能状態に遷移する際のPreTaskHookが，それぞれ呼び出されない
	  場合があるバグを修正．
	+ アプリケーションを固定優先度スケジューリングでスケジュールした場
	  合に，アプリケーションがディスパッチされる際のdispatch from task
	  Xログが出力されないことがあるバグを修正．
  - その他
    + タスク切替え時オーバヘッドのデフォルト値を0に変更（hook.rb で定義
      されているフック関数内のexc()をコメントアウト）．

Release 0.5.6
・シミュレータ（schesim.rb）
  - 機能追加
    + PreTaskHookとPostTaskHookをOSEK仕様に準拠するよう実装し直した．こ
	  れに加えて，Hook内でexc()関数を呼び出せるようにした．
    + PreTaskHookとPostTaskHookの実行開始と実行終了のログを表示できるよ
      うにした．
    + PreTaskHookとPostTaskHookの実行時間をTLVで可視化できるようにした．
  - ディレクトリ構成の変更
    + ルートディレクトリにあったいくつかのプログラムをutilsに移動した．
    + ディレクトリ構成をREADME.txtにまとめた．

Release 0.5.5
・シミュレータ（schesim.rb）
  - 機能追加
    + ノンプリエンプティブタスクのサポート
    + タスク起動API act_tskで，起動までの相対時刻を指定できるようにした．
    + AMP型マルチコアにおいて，別コアのタスクを起動できるようにした．
  - 仕様変更
    + タスク切り替え時のログ（dispatch to xx）の出力条件を見直して，余分
      なログ出力を削減．
  - 実行効率化
    + シミュレーションすべきイベントの発生時刻の管理において，不要なイベ
      ント発生時刻を削除した．
    + シミュレーションの基本ループを見直して，システム時刻が更新するま
      で繰り返し実行する処理と，システム時刻が更新された場合のみ実行す
      る処理に分離．
  - ソースコードの整理
    - 共通ルーチンをモジュールにして，別ファイル
    （include/common_module.rb）に移動．
    - アプリケーションのパラメータである仮想時刻を削除．
  - バグ修正
    - タスク切替えにおいて，切り替えたタスクの次イベントが設定されない
      場合があるバグを修正．
・説明資料（manual.pdf）
  - 追加機能の説明を追加
  - タスク処理ライブラリの説明を更新
・その他
  - テスト実行プログラムの追加（test/test.rb）．
  - コマンド実行用Rakefileの追加．
  - README.txtから，変更履歴とTODOをversion.txtに分離．

Release 0.5.4
・シミュレータ（schesim.rb）
  - コンフィギュレーションの追加
    - 浮動小数点数値の小数点以下の有効桁数の指定
	  - システム時刻表示においては以下のようになる
	　	例１：有効桁数を桁数を1に設定すると，1.2を12と表示する
	　	例２：有効桁数を2に設定すると，1.23を123と表示する
	　	例３：有効桁数を2に設定すると，1.234を123と表示する
    - タスクの起動要求キューイング数の上限の指定（max_actcnt）
  - アプリケーション情報ファイルのパラメータに対するエラー処理
  - バグの修正
  	- 小数点以下の桁数の異なる浮動小数点の演算において発生する丸め誤差
      により，異常終了してしまうバグを修正
	- rubyのバージョン1.9で，シナリオ記述機能を使用したときに発生するバ
      グを修正
・説明資料（manual.pdf）
  - アプリケーション情報ファイルの説明に，指定するパラメータの制限事項
    を追記
・その他
  - シミュレータ出力ログから，統計情報をxlsに出力するツール（stats.rb）
    を追加
  - サンプルプログラム（sample/以下）にある不要なファイルを削除し，必要
    なファイルを追加

Release 0.5.3
・シミュレータ（schesim.rb）
  - コンフィギュレーションファイルの追加
    - ログの種類ごとに表示・非表示の選択
      - 例：階層型スケジューリング以外ではバジェットの情報はそれほど重
	  	要ではないので出力しない
    - シミュレーションを停止するデッドラインミス発生回数の指定
・その他
  - Excel等のスプレッドシートファイルからアプリケーション情報ファイルを
    生成するツール（xls2app.rb）を追加
・説明資料（manual.pdf）
  - シミュレーションの流れの図を修正
  - シミュレータの動作設定（コンフィギュレーションファイル）の説明を追加

Release 0.5.2
・シミュレータ（schesim.rb）
  - ruby 1.9への対応
  - 時刻パラメータの浮動小数点対応
    - システム時刻
      - ただし，TLVでは浮動小数点のシステム時刻のログを表示できないため，
        暫定的な対応として，ログ出力の際に，システム時刻を10倍して小数
        点以下を丸めた値をシステム時刻としている．
    - タスク処理時間（exc関数）
	- タスク周期
      - LCMの計算も浮動小数点に対応した
  - バグの修正
    - 同一の絶対デッドラインに対するミスが複数表示される問題を修正．デッ
      ドラインをミスしたタスクは，その時点でデッドライン監視の対象から
      外す．

Release 0.5.1

・シミュレータ（schesim.rb）
  - タスクに初期起動オフセットのパラメータを追加．
  - 停止しないタスク（待ち→待ち解除を繰り返すタスク）のデッドライン監
    視機能の追加．
    - タスクが実行可能状態に遷移する場合に加えて，待ち解除した場合にも，
      タスクの絶対デッドラインを更新し，デッドラインミスを監視する
    - タスクが休止状態に遷移する場合に加えて，待ち状態に遷移する場合に
      も，タスクに対するデッドライン監視を解除する
  - バグの修正
    - シミュレーション時間の上限が，100,000単位時間に制限されていたが，
      無制限に修正
    - 固定優先度ベーススケジューリングにおいて，タスク数が多い場合に，
      同一優先度タスク間の優先順位がFIFOになっていないバグを修正
・タスク生成（appgen.rb）
	- タスクの初期起動オフセット情報（現在は0に固定）を出力するよう変更・
・説明資料（manual.pdf）
	- 軽微な修正・サンプルプログラム- オフセット情報の追加

Release 0.5.0

・シミュレータ（schesim.rb）
  - タスク処理をスレッド化
    - 処理内容を外部ファイル（task_func.rb）で記述できるようにした
    - 動作モード（共有変数）
    - アプリケーションからの入力パラメータの１つである最悪実行時間を，
      シミュレーション時に使用しないように変更．ただし，統計情報の計算
      では使用する．
  - タスクスレッド用APIライブラリ
    - exc：指定時間実行する
    - wai_sem／sig_sem：セマフォの獲得／解放
    - act_tsk：タスク起動
    - GetResource／ReleaseResource：リソースの獲得／解放
    - SetEvent/WaitEvent/ClearEvent：イベントのセット／待ち／クリア
	  - １つのイベントのみを管理する機能である．
	  - OSEK OSの仕様に完全に対応した機能ではない．
  - シナリオ入力機能
    - コメント記述（#で始める行はコメントと判断する）
    - act_tsk：タスク起動
    - chg_mod：モード変更
  - ファイル構成を変更
    - コアに関する定義をcore.rbに分離
    - アプリケーションに関する定義をacb.rbに分離
    - バジェットに関する定義をbudget.rbに分離
・タスク生成（appgen.rb）
  - タスク処理記述ファイルの自動生成
  - 生成したアプリケーションファイルの出力ディレクトリのディフォルト
    を./tasksetから./appsに変更
  - ソースコードの構造を見直し
  - 優先度割当てポリシの指定オプションを-sから-pに変更
  - 乱数生成に用いたシードを出力する機能を追加（-s）オプション
・その他
  - シミュレーション実行スクリプト（test.sh）の見直し
  - スケジュールできないアプリケーションを表示するスクリプト（check.sh）の見直し
  - アプリケーション統計情報を取得するスクリプト（appinfo.rb）をjsonファイルに対応
  - TLVでのシステムコール呼出しの文字表示
    - アプリログの表示定義：applogStringShapesを次のように修正
	  - 上向き矢印に変更
	  - 矢印の長さを短く変更
	  - 幅を2に変更
  	  - 変更理由：ASPカーネルやFMPカーネルでは，API呼出し中に幅があるが，
	    シミュレータでは呼出し時刻に完了してしまうため，うまく表示でき
	    ない．そのため，アプリログを用いる．
  - シミュレータ説明資料ファイルをSimulator.pptからmanual.pdfに変更
  - シミュレータの説明資料の更新
  - サンプルプログラムをsample/に追加
    - タスク起動とリソース機能
    - シナリオ機能
    - イベント機能

Release 0.4.0

・タスク生成（appgen.rb）
  - マルチコアシステムに対応
    - CPUは1つ
    - 1CPU内に複数のコアがある
    - 1つのコア内に複数のアプリケーションがある
  - 出力ファイル形式をCSVからJSON形式に変更
  - コアごとにスケジューリングアルゴリズムを選択できるようにした
・シミュレータ（schesim.rb）
  - 入力ファイル形式をJSON形式に変更（CSV形式は廃止）
  - コマンドオプションを整理し，入力ファイルに一本化した
  - 何もイベントが発生しない時刻をとばす処理を追加した
  - コアの初期化時に，アプリケーションとタスクの初期起動処理を行うよう
    修正した
・TLV用ファイル
  - マルチコアシステムへの対応（FMPカーネル用ファイルの取込み）
  - タスクが連続時間実行される場合に，実行中タスクの表示が，最初の１単
    位時間しか表示されないバグを修正
・その他
  - シミュレータの説明資料を追加した（doc/Simulator.ppt）
    
Release 0.3.0

・シミュレータ（schesim.rb）
  - 固定優先度スケジューリングモードをRM/DM/FPの3種類からFPに統一．
    RM/DMはタスク生成時の優先度割当てで実現する．
  - 修正した時間保護アルゴリズムのサポート
    - FPに対応した時間保護を実現できる
  - TCBクラスを別ファイル（tcb.rb）に分離
  - ログ出力条件の追加（ログファイルサイズの削減のため）
    - デッドライン・ミスが発生したときはlogファイルにログを出力
    - デバッグ用ログは，loggerで選択できるよう修正
  - 非周期タスクのサポート（-n オプション）
    - タスクの周期を，最小到着間隔とする
    - 起動時刻のジッタ（最小到着間隔からの相対値）は，指数分布で与える
  ｰ 複数アプリのサポート（-a オプション）
    - BSS，時間保護アルゴリズムを適用するアプリは1つ
    - 残りはお邪魔アプリ
  - CPUアイドル時の振る舞いを再検討
    - ３つ以上のアプリケーションが存在することも想定
  - シミュレーション時間の指定（-e オプション）
    - ただし，FPモードの場合はタスクセットの周期のLCMとする
・タスク生成（appgen.rb）
  - 同一優先度タスクがないタスクセットを生成する
    - 同一優先度タスクがあると，タスク起動順によっては偶然スケジュール
      可能となってしまう．
  - レートモノトニック用の優先度割当てオプション（-s rm）の追加
  - 出力ファイル名を乱数発生用seed番号から，ファイル番号（6桁数値）に変更
・タスクセット統計情報取得（appinfo.rb）
  - 複数のタスクセットの統計情報として次の情報を計算する
    - 平均タスク数
    - 平均CPU利用率
・スケジュールできないタスクセットを表示するスクリプトを追加（check.sh）
  - logファイルはあるが，csvファイルがないタスクセットを表示する
  - アルゴリズムを指定してチェックするスイッチ機能を追加
・シミュレーション実行スクリプト（test.sh）
  - アルゴリズムを指定してシミュレーションを実行するスイッチ機能を追加

Release 0.2.0

・階層型スケジューリングへの対応
  - グローバルスケジューリングはFPとEDFをサポート
  - アプリケーションの周期実行をサポート
    - 周期起動アルゴリズムで，次の起動時刻をランダムに決定するお邪魔アプリを追加．
  - BSSアルゴリズムのサポート
    - タスク実行が終了したときに，アプリケーションをレディーキューに再接続する
  - 時間保護アルゴリズムのサポート
  - CPUアイドル時の振る舞いを追加
    - ２つのアプリケーションが存在することを想定
・スケジューリングの改良
  - タスク起動要求キューイングへの対応
・TLVに対応したログの出力
  - タスクのデッドラインミスの表示
  - アプリケーションの状態変化を表示する機能を追加
  - アプリケーションが満了状態のときに，実行状態タスクを待ち状態として表示
・そのほか
  - シングルスケジューリングモードのサポート（-s オプション）
    - シングルプロセッサで固定優先度スケジューリングをシミュレーションするモード
    - シングルプロセッサでレートモノトニッックスケジューリングをサポート
  - タスクセット指定のサポート（-t オプション）
    - sample.csvを標準入力ファイルとする
      - BSSでデッドラインミスが発生する例を試した
  - リソースファイル指定のサポート（-r オプション）
  - RDocによるドキュメント生成サポート
  - 複数のタスクセットで，連続でシミュレーション
    - デッドラインミスが発生するタスクセットを検出
    - タスクセットの生成機能を別プログラム（appgen.rb）に分離

Release 0.1.0

・スケジューリング・アルゴリズムを選択可能
  - サポートしているアルゴリズム：
    - 固定優先度割当てスケジューリング（FP）
	- レート・モノトニック（RM）
	- デッドライン・モノトニック（DM）
	ｰ Earliest Deadline First（EDF）
・タスクセットの自動生成
  - CPU利用率が1以下の範囲で，周期タスクを自動で生成する
    - タスクの相対デッドラインは，周期に一致する
・TLVに対応したログの出力
  - aspカーネル形式でタスクの状態遷移，ディスパッチのログを出力（標準出力）
  - TLV用リソースファイルを自動生成（ファイル（sample.res））

○TODO

Release 0.6.0

・シミュレータ（schesim.rb）
  - 階層型スケジューリングへの対応
    - BSSアルゴリズムにおいてデッドラインミスが発生した時の振る舞い
      - アプリケーションデッドラインを延長する処理の追加
  - タスクスレッド用APIライブラリ
	- 割込み許可／禁止
  - イベント，リソースをIDで指定できるようにする
  - タスクIDを文字列で指定できるようにする
    - タスクIDを文字列にした場合は，タスク関数の名称をIDのみにする
    - タスクIDを数値にした場合は，タスク関数の名称を"task"+IDに変更する
  - SMP型マルチコア向けスケジューリングのサポート
  - 出力ログ形式として，TLVの標準トレースログ形式をサポート
    - Builder Pattern を利用すると綺麗に設計できると思われる
  - 乱数の種（seed）をアプリケーションファイルで指定できるようにする

・TLVでの表示機能
  - アプリケーションごとにスケジューリング結果の表示を分ける
    → リソースの表示を任意に変更できるか？
  - 残りバジェットの表示を見やすく
    → vizファイル上での演算．
	   例："Size":"100%,(${ARG0}+20)%"みたいな感じ．
	→ 現在は単にバジェットを10倍して表示を大きくしている
  - 同じ時刻に複数のAPIを発行した場合，API名称が上書きされてしまい，最
    後に発行したAPI名しか表示されない
	→ 表示する高さを分けるか？

・その他
  - テストプログラムの追加
  - GUIインタフェース
  - シミュレーション完了時にメールにて結果を通知する機能
  - ウェブアプリとして実装

以上．
